<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุจุญุซ</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>

  <nav class="navbar">
    <div class="navbar-right" dir="ltr">
      <label id="headerRight2">ูุธุงู ุดูุงุฏุฉ ุงููุตุฏุฑ ูุงูููุดุฃ | </label>
      <label id="headerRight"> ุงูุบุฑูุฉ ุงูุชุฌุงุฑูุฉ ุงููุตุฑูุฉ ุจุงูุงุณููุฏุฑูุฉ </label>
      <img src="{% static 'ACOC_Logo_Final[1].png' %}" alt="Company Logo" class="logo">
    </div>
    <div class="navbar-left" dir="rtl">
      <label id="headerLeft2"> Origin Certificate System | </label>
      <label id="headerLeft"> Alexandria Chamber of Commerce </label>
    </div>
    <button class="menu-btn" onclick="toggleSidebar()">โฐ</button>
        <div class="user-dropdown">
        <button class="user-btn" onclick="toggleDropdown()">
            <i class="user-icon">๐ค</i>
        </button>
        <div class="dropdown-content" id="userDropdown">
            <div class="user-info">
                <p><strong>ุงูุงุณู:</strong> {{ request.user.get_full_name|default:request.user.username }}</p>
                {% if request.user.userprofile.branch %}
                    <p><strong>ุงููุฑุน:</strong> {{ request.user.userprofile.branch.name }}</p>
                {% endif %}
                <p><strong>ุงูุฏูุฑ:</strong> 
                    {% if request.user.is_superuser %}
                        ุงููุดุฑู ุงูุนุงู
                    {% elif request.user.userprofile.is_branch_admin %}
                        ูุฏูุฑ ุงููุฑุน
                    {% else %}
                        ูุณุชุฎุฏู
                    {% endif %}
                </p>
            </div>
            <form action="{% url 'logout' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="logout-btn" style="background: none; border: none; cursor: pointer;">
                    <i class="logout-icon">๐ช</i> ุชุณุฌูู ุงูุฎุฑูุฌ
                </button>
            </form>
        </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <a href="javascript:void(0)" onclick="toggleSidebar()">โ</a>
    <a href="{% url 'index' %}">ุงูุตูุญู ุงูุฑุฆูุณูู</a>
    <a href="{% url 'filter' %}">ุจุญุซ</a>
    <a href="{% url 'cargo' %}">ุงูุจุถุงุฆุน</a>
    <a href="{% url 'country' %}">ุงูุจูุฏ</a>
    <a href="{% url 'report' %}">ุงูุชูุฑูุฑ</a>
    {% if request.user.is_superuser or request.user.userprofile.is_branch_admin or request.user.userprofile.is_branch_user %}
    <a href="/admin/">ููุญุฉ ุงูุชุญูู</a>
    {% endif %}
  </div>

  <!-- Main Content Wrapper -->
  <div class="content-wrapper">
    <!-- Page Content -->
    <div class="container">
      <!-- Edit Modal -->
      <div id="editModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeEditModal()">ร</span>
          <h2>ุชุนุฏูู ุงูุดูุงุฏุฉ</h2>
          <form id="editForm" method="post" action="#" onsubmit="submitEditModal(); return false;">
            <input type="hidden" id="editCertificateId" name="editCertificateId">
            <div class="form-row">
              <!-- First Column -->
              <div class="form-container">
                <div class="form-group">
                  <label for="branchName">ุงุณู ุงููุฑุน</label>
                  <select id="branchName" required>
                    <option value="" disabled selected>ุงุฎุชุฑ ุงููุฑุน</option>        
                    <option value="ูุญุทู ุงูุฑูู">ูุญุทู ุงูุฑูู</option>
                    <option value="ุงูุณูุทุงู ุญุณูู">ุงูุณูุทุงู ุญุณูู</option>
                    <option value="ุงูุงุณุชุซูุงุฑู">ุงูุงุณุชุซูุงุฑู</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="companyStatus">ุญุงูุฉ ุงูููุดุฃู</label>
                  <select id="companyStatus" required>
                    <option value="ูููุฏ">ูููุฏ</option>
                    <option value="ุบูุฑ ูููุฏ">ุบูุฑ ูููุฏ</option>
                  </select>
                </div>    
                <div class="form-group">
                  <label for="office">ุงุณู ุงูููุชุจ</label>
                  <select id="office" required>
                    <option value="">ุงุณู ุงูููุชุจ</option>
                    <option value="ุนุงู">ุนุงู</option>
                    <option value="ุดุฑู">ุดุฑู</option>
                    <option value="ุจุฑุฌ ุงูุนุฑุจ">ุจุฑุฌ ุงูุนุฑุจ</option>
                    <option value="ุงุณุชุซูุงุฑู">ุงุณุชุซูุงุฑู</option>
                    <option value="ุบุฑูู">ุบุฑูู</option>                 
                  </select>
                </div>
                <div class="form-group">
                  <label for="registrationNumber">ุฑูู ุงูุณุฌู</label>
                  <input type="text" id="registrationNumber" placeholder="ุฑูู ุงูุณุฌู" required>
                </div>              
                <div class="form-group">
                  <label for="companyName">ุงุณู ุงูุดุฑูุฉ</label>
                  <input type="text" id="companyName" required>
                </div>
                <div class="form-group">
                  <label for="companyAddress">ุนููุงู ุงูุดุฑูุฉ</label>
                  <input type="text" id="companyAddress" required>
                </div>
                <div class="form-group">
                  <label for="companyType">ููุน ุงูุดุฑูุฉ</label>
                  <select id="companyType" required>
                    <option value="" disabled selected>ุงุฎุชุฑ ููุน ุงูุดุฑูู</option>
                    <option value="ุดุฑูู">ุดุฑูู</option>
                    <option value="ูุฑุฏู">ูุฑุฏู</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="certificateNumber">ุฑูู ุงูุดูุงุฏุฉ</label>
                  <input type="text" id="certificateNumber" required>
                </div>
                <div class="form-group">
                  <label for="exportCountry">ุจูุฏ ุงูุชุตุฏูุฑ</label>
                  <select id="exportCountry" required>
                    <option value="" disabled selected>ุงุฎุชุฑ ุจูุฏ ุงูุชุตุฏูุฑ</option>
                  </select>
                  <button type="button" class="add-button" onclick="openModal('exportCountry')">+</button>
                </div>
                <div class="form-group">
                  <label for="originCountry">ุจูุฏ ุงูููุดุฃ</label>
                  <select id="originCountry" required>
                    <option value="ูุตุฑ" selected>ูุตุฑ</option>
                  </select>
                  <button type="button" class="add-button" onclick="openModal('originCountry')">+</button>
                </div>  
              </div>
              <!-- Second Column -->
              <div class="form-container">
                <div class="form-group">
                  <label for="processDate">ุชุงุฑูุฎ ุงูุนูููุฉ</label>
                  <input type="date" id="processDate" required>
                </div>
                <div class="form-group">
                  <label for="receiptNumber">ุฑูู ุงูุงูุตุงู</label>
                  <input type="text" id="receiptNumber" required>
                </div>
                <div class="form-group">
                  <label for="receiptDate">ุชุงุฑูุฎ ุงูุงูุตุงู</label>
                  <input type="date" id="receiptDate" required>
                </div>
                <div class="form-group">
                  <label for="paymentAmount">ุงููููุฉ ุงููุฏููุนุฉ</label>
                  <input type="number" id="paymentAmount" required>
                </div>
                <div class="form-group">
                  <label for="quantity_unit">ููุน ุงููุญุฏุฉ (ุงูุชุฑุงุถู ุงูุดูุงุฏุฉ)</label>
                  <select id="quantity_unit" required>
                    <option value="" disabled selected>ุงุฎุชุฑ ููุน ุงููุญุฏุฉ</option>
                    <option value="ุทู">ุทู</option>
                    <option value="ูุฌู">ูุฌู</option>
                    <option value="ูุญุฏู">ูุญุฏู</option>    
                  </select>
                </div>
                <div class="form-group">
                  <label for="cost_currency">ููุน ุงูุนููุฉ (ุงูุชุฑุงุถู ุงูุดูุงุฏุฉ)</label>
                  <select id="cost_currency" required>
                    <option value="" disabled selected>ุงุฎุชุฑ ููุน ุงูุนููุฉ</option>
                    <option value="USD">ุฏููุงุฑ</option>
                    <option value="EUR">ููุฑู</option>
                    <option value="EGP">ุฌููู ูุตุฑู</option>
                    <option value="GBP">ุงูุฌููู ุงูุฅุณุชุฑูููู</option>
                    <option value="SAR">ุฑูุงู ุณุนูุฏู</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="importCompanyName">ุงุณู ุงูุดุฑูู ุงููุณุชูุฑุฏู</label>
                  <input type="text" id="importCompanyName" placeholder="ุงุฏุฎู ุงุณู ุงูุดุฑูู ุงููุณุชูุฑุฏู" required>
                </div>
                <div class="form-group">
                  <label for="importCompanyAddress">ุนููุงู ุงูุดุฑูู ุงููุณุชูุฑุฏู</label>
                  <input type="text" id="importCompanyAddress" placeholder="ุงุฏุฎู ุนููุงู ุงูุดุฑูู ุงููุณุชูุฑุฏู" required>
                </div>
                <div class="form-group">
                  <label for="importCompanyPhone">ุชููููู ุงูุดุฑูู ุงููุณุชูุฑุฏู</label>
                  <input type="text" id="importCompanyPhone" placeholder="ุงุฏุฎู ุชููููู ุงูุดุฑูู ุงููุณุชูุฑุฏู">
                </div>
                <!-- Shipments Section -->
                <div class="CenterContainer">
                  <div class="form-group">
                    <label for="shipment">ุงูุดุญูู</label>
                    <button type="button" class="add-button" onclick="openModal('cargo')">ุงุถู ุจุถุงุนู ุฌุฏูุฏู</button>
                    <button type="button" id="addShipmentGroup" class="add-button">ุงุถู ุดุญูู ุฌุฏูุฏู</button>
                    <div id="shipmentContainer"></div>
                  </div>
                </div>
              </div>
            </div>
            {% if request.user.is_superuser or request.user.userprofile.is_branch_admin %}
            <button id="modalEditButton" type="submit">ุชุนุฏูู</button>          
            {% endif %}
          </form>
        </div>
      </div>

      <h1>ุจุญุซ</h1>
      <div class="filter">
        <div class="form-group">
          <label for="filterOffice">ุงุณู ุงูููุชุจ</label>
          <select id="filterOffice">
            <option value="">ุงุฎุชุฑ ููุชุจ</option>
            <option value="ุนุงู">ุนุงู</option>
            <option value="ุดุฑู">ุดุฑู</option>
            <option value="ุจุฑุฌ ุงูุนุฑุจ">ุจุฑุฌ ุงูุนุฑุจ</option>
            <option value="ุงุณุชุซูุงุฑู">ุงุณุชุซูุงุฑู</option>
            <option value="ุบุฑูู">ุบุฑูู</option>                
          </select>
        </div>
        <div class="form-group">
          <label for="filterRegistrationNumber">ุฑูู ุงูุณุฌู</label>
          <input type="text" id="filterRegistrationNumber" placeholder="ุงุฏุฎู ุฑูู ุงูุณุฌู">
        </div>
        <button id="searchButton" onclick="searchCertificates()">ุจุญุซ</button>
      </div>
      
      <div class="table-container">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>ุงุณู ุงูููุชุจ</th>
              <th>ุฑูู ุงูุณุฌู</th>
              <th>ุฑูู ุงูุดูุงุฏุฉ</th>
              <th>ุงุณู ุงูุดุฑูุฉ</th>
              <th>ุนููุงู ุงูุดุฑูุฉ</th>
              <th>ุญุงูุฉ ุงูููุดุฃู</th>
              <th>ููุน ุงูุดุฑูุฉ</th>
              <th>ุงุณู ุงููุฑุน</th>
              <th>ุงุณู ุงูุดุฑูู ุงููุณุชูุฑุฏู</th>
              <th>ุนููุงู ุงูุดุฑูู ุงููุณุชูุฑุฏู</th>
              <th>ุชููููู ุงูุดุฑูู ุงููุณุชูุฑุฏู</th>
              <th>ุงูุจุถุงุนุฉ</th>
              <th>ุจูุฏ ุงูุชุตุฏูุฑ</th>
              <th>ุจูุฏ ุงูููุดุฃ</th>
              <th class="date-column">ุชุงุฑูุฎ ุงูุนูููุฉ</th>
              <th>ุงููููุฉ</th>
              <th>ุงูุชูููุฉ</th>
              <th>ุฑูู ุงูุงูุตุงู</th>
              <th class="date-column">ุชุงุฑูุฎ ุงูุงูุตุงู</th>
              <th>ุงููููุฉ ุงููุฏููุนุฉ</th>
              <!-- Change the edit/delete button conditions -->
              {% if request.user.is_superuser or request.user.userprofile.is_branch_admin %}
              <th>ุชุนุฏูู</th>
              <th>ุญุฐู</th>
            {% endif %}            
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>

      <!-- Modal for Adding New Items -->
      <div id="modal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">ร</span>
          <label for="newItem">ุฅุถุงูู ุนูุตุฑ ุฌุฏูุฏ</label>
          <input type="text" id="newItem" placeholder="ุงุฏุฎู ุงูุนูุตุฑ ุงูุฌุฏูุฏ">
          <button type="button" onclick="addItem()">ููุงูู</button>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>This website and system have been developed by the Alexandria Chamber of Commerce IT Department. 
      For any inquiries, please contact the IT Department via email at <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4b223f0b2a272e332a252f39222a6628232a26292e3965282426">[email&#160;protected]</a>.
      Unauthorized access, misuse, or any illegal activities related to this system are strictly prohibited and may result in legal action. 
      All activities on this platform are monitored and logged for security purposes.</p>
      <img src="{% static 'ACOC.png' %}" alt="Footer Image" class="footer-img">
  </div>

  <!-- Shipment Template -->
  <template id="shipmentTemplate">
    <div class="shipment-group">
      <div class="form-group inline-group">
        <div>
          <label>ุงูุจุถุงุนู</label>
          <select class="cargo" required>
            <option value="" disabled selected>ุงุฎุชุฑ ุงูุจุถุงุนุฉ</option>
          </select>
        </div>
        <div>
          <label>ุงููููู</label>
          <input type="number" step="0.01" class="quantity" placeholder="ุฃุฏุฎู ุงููููุฉ" required>
        </div>
        <div>
          <label>ุงูุชูููู</label>
          <input type="number" step="0.01" class="cost_amount" placeholder="ุฃุฏุฎู ุงูุชูููุฉ" required>
        </div>
        <button type="button" class="removeShipment">ุญุฐู</button>
      </div>
    </div>
  </template>

  {% if request.user.is_superuser or request.user.userprofile.is_branch_admin %}
  <script>window.isBranchAdmin = true;</script>
{% else %}
  <script>window.isBranchAdmin = false;</script>
{% endif %}
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
  <script src="{% static 'script.js' %}"></script>
</body>
</html>